/** 
 * 
 */
package driver

import java.util.ArrayList

import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Initialize

import car.capacities.control.AccelerationControlChange
import car.capacities.control.SteeringWheelControlChange
import car.events.PositionChanged
import car.events.SpeedChanged
import driver.capacities.CruiseControl
import driver.capacities.FollowTrack
import driver.capacities.MapMatching
import model.map.Track
import model.geom.Point2d
import model.map.ProjectionModel
import driver.behaviors.FollowTrackBehavior
import io.sarl.core.Behaviors

/** 
 * @author alombard
 * 
 */
agent DriverAgent {
	
	uses Behaviors
	
	var track : Track
	
	on Initialize {
		setSkill(new DefaultMapMatching, MapMatching)
		setSkill(new ImprovedPurePursuit, FollowTrack)
		setSkill(new DefaultCruiseControl, CruiseControl)
	
		// Initialize track
		val points = new ArrayList<Point2d>();
		points.add(new Point2d(0, 160))
		points.add(new Point2d(4000, 160))
		
		this.track = new Track("track", ProjectionModel.LAMBERT2E, points)
		
		// Initialize behavior
		val followTrackBehavior = new FollowTrackBehavior(this, this.track)
		
		registerBehavior(followTrackBehavior)
	}
}
